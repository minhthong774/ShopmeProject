<!DOCTYPE html>
<html xmlns:th="http://www.thymeLeaf.org">
  <head th:replace="fragments::page_head('Manage - Categories')"> </head>
  <body>
    <div class="container-fluid">
      <div th:replace="navigation::menu"></div>

      <div>
        <h1>Manage Categories</h1>
        <a
            th:href="@{/categories/new}"
          class="fas fa-folder-plus fa-2x icon-dark mr-2"
        ></a>
        <a
        th:href="@{/categories/export/csv}"
          class="fas fa-file-csv fa-2x icon-dark mr-2"
        ></a>
      </div>

      <div th:if="${message != null}" class="alert alert-success text-center">
        [[${message}]]
      </div>

      <div>
      <form th:action="@{/categories/page/1}" class="form-inline m-3">
        <input type="hidden" name="sortField" th:value="${sortField}" />
        <input type="hidden" name="sortDir" th:value="${sortDir}" />
        Filtter: &nbsp;
        <input
          type="search"
          name="keyword"
          th:value="${keyword}"
          class="form-control"
          required
        />
        &nbsp;&nbsp;
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-search"></i>
        </button>
        &nbsp;&nbsp;
        <button type="button" class="btn btn-secondary" onclick="clearFilter()">
          <i class="fas fa-eraser"></i>
        </button>
      </form>
    </div>

    <div class="full-details">
      <table
        class="
          table table-bordered table-striped table-hover table-responsive-xl
        "
      >
        <thead class="thead-dark">
          <tr>
            <th class="hideable-column">
              <th th:replace="fragments :: column_link('id', 'User ID', 'tag')" />
            </th>
            <th>Photos</th>

            <th>
              <a class="text-white" th:href="@{'/categories?sortDir=' + ${reverseSortDir}}">Category Name</a>
              <span
            th:class="${reverseSortDir == 'desc' ? 'fas fa-sort-up' : 'fas fa-sort-down'}"
          ></span>
            </th>

            <th
              th:replace="fragments :: column_link('alias', 'Alias', 'none')"
            />

            <th
              th:replace="fragments :: column_link('enabled', 'Enabled', 'none')"
            />
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr th:each="category : ${listCategories}">
            <td class="hideable-column">[[${category.id}]]</td>
            <td>
              <span
                th:if="${category.image == null}"
                class="fas fa-portrait fa-3x icon-silver"
              ></span>
              <img
                th:if="${category.image != null}"
                style="width: 100px"
                th:src="@{${category.imagePath}}"
                class="img-fluid"
              />
            </td>
            <td class="hideable-column">[[${category.name}]]</td>
            <td>[[${category.alias}]]</td>

            <td>
              <div th:replace="fragments :: category_status"/>
            </td>

            <td>
              <div th:replace="fragments :: category_actions"/>
            </td>

          </tr>
        </tbody>
      </table>

      <div th:replace="fragments::pagination('/categories', 'categories')"></div>

      <div th:replace="model_fragments :: confirm_modal"/>

      <div th:replace="fragments::footer"></div>
    </div>
    <script th:src="@{/js/common_list.js}"></script>
    <script type="text/javascript">
      moduleURL = "[[@{/categories}]]";

      $(document).ready(function(){
        $(".link-delete").on("click", function(e){
          e.preventDefault();
          showDeleteConfirmModal($(this), 'category');
        })
      })
    </script>
  </body>
</html>
